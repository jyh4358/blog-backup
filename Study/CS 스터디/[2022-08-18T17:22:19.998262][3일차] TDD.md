# TDD

## TDD 란 무엇인가?

**Test-Driven Development(TDD)** 는 반복 테스트를 이용한 소프트웨어 방법론으로 작은 단위의 테스트 케이스를 작성하고 이를 통과하는 코드를 추가하는 단계를 반복하여 구현한다.

짧은 개발 주기의 반복에 의존하는 개발 프로세스이며, 애자일 방법론 중 하나인 eXtream  Programming(XP)의 ‘Test-First’ 개념에 기반을 둔 단순한 설계를 중요시하는 테스트 주도 개발이다.

<br/>

## TDD의 개발 주기

![첨부 이미지](https://file-upload-store-jdd.s3.ap-northeast-2.amazonaws.com/TDD%EA%B0%9C%EB%B0%9C%EC%A3%BC%EA%B8%B0.webp)


1. RED
    - 실패하는 테스트 코드를 먼저 작성
2. GREEN
    - 테스트 코드를 성공시키기 위한 실제 코드를 작성
3. BLUE
    - 중복 코드 제거, 일반화 등의 리팩토링을 수행

중요한 것은 실패하는 테스트 코드를 작성할 때까지 실제 코드를 작성하지 않는 것과, 실패하는 테스트를 통과할 정도의 최소 실제 코드를 작성해야 하는 것이다. 이를 통해 실제 코드에 대해 기대되는 바를 보다 명확하게 정의 함으로써 불필요한 설계를 피할 수 있고, 정확한 요구 사항에 집중할 수 있다.

<br/>

## 일반 개발 방식과 TDD 개발 방식의 비교

### 일반 개발 방식

보통 개발 방식은 ‘요구사항 분석 → 설계 → 개발 → 테스트 → 배포’의 형태의 개발 주기를 갖는다.

이러한 일반 개발 방식의 문제점은 어느 프로젝트든 초기 설계가 완벽하다고 말할 수 없기 때문에 재설계로 인해 개발자는 코드를 삽입, 수정, 삭제하는 과정에서 불필요한 코드가 남거나 중복이 될 가능성이 크다

또한 작은 부분의 기능 수정에도 모든 부분을 테스트해야 하므로 전체적인 버그를 검출하기 어려워진다. 따라서 자체 버그 검출 능력이 저하된다. 그 결과 어디서 버그가 발생할지 모르기 때문에 잘못된 코드도 고치지 않으려 하는 현상이 나타나게 된다.

<br/>

### TDD 개발 방식

테스트 주도형 개발에선, 새로운 기능을 추가하기 전 테스트를 먼저 작성한다. 테스트를 작성하기 위해서, 개발자는 해당 기능의 요구 사항과 명세를 분명히 이해하여 실제 코드를 작성하기 전에 보다 요구 사항에 집중할 수 있도록 도와준다.

어떤 새로운 기능을 추가하면 잘 작동하던 기능이 제대로 작동하지 않는 경우가 발생할 수 있기 때문에 새로운 기능을 추가할 때 테스트 코드를 작성함으로써, 새로운 기능이 제대로 작동함과 동시에 기존의 기능들이 잘 작동하는지 테스트를 통해 확인할 수 있는 것이다.

또한 프로젝트의 단위가 커지게 되면 리팩토링 과정에서 테스트 주도 개발을 통해 개발을 해왔다면 테스트 코드가 그 중심을 잡아준다. 리팩토링을 진행하면서 간단히 테스트를 돌려 테스트 통과 여부를 통해 안심하고 계속해서 리팩토링을 진행할 수 있다. 결과적으로 리팩토링 속도도 빨라지며 코드의 퀄리티도 그만큼 향상하게 되는 것이다.

<br/>

## TDD의 단점

### 코드의 생산성

두 배는 아니더라도 구현하는 코드량이 늘어나게 된다. 때문에 코드 퀄리티보다는 빠른 생산성이 요구되는 시점에서 TDD 는 큰 걸림돌이 될 수 있다.

<br/>

### 진입 장벽

진입 장벽이 존재하여 TDD 개발 방식을 적용하기에 큰 걸림돌이 된다. 어떠한 부분을 테스트 해야 할 지, 어떻게 테스트를 해야 할 지, 여러 테스트 프레임워크 중 어떤 것이 우리의 서비스와 맞는지 등 여러 부분들에 대한 학습이 필요하고 익숙해지는 시간이 걸린다. 팀에서 한 명만 익숙해진다고 해결될 일이 아니다. 개발은 팀 단위로 수행되기 때문에 팀원 전체의 동의가 필요하고 팀원 전체가 익숙해져야 비로소 테스트 코드가 빛을 발하게 되는 것이다.

<br/>

### 모든 경우에 대한 테스트 코드 작성

세상에는 다양한 사용자가 존재하며, 생각지도 못한 예외 케이스가 존재할 수 있다. 이러한 모든 경우에 대한 테스트 코드를 작성하게 된다면 배보다 배꼽이 더 커지는 주객이 전도되는 상황이 발생할 수 있다.



